<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catch the Emoji üíñ</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family:'Kanit',sans-serif;
    margin:0; padding:0;
    background: linear-gradient(120deg,#ff9a9e,#fad0c4,#fbc2eb,#a18cd1,#8fd3f4);
    background-size: 300% 300%;
    animation: bgFlow 14s ease infinite;
    display:flex;
    flex-direction:column;
    align-items:center;
    min-height:100vh;
    overflow:hidden;
  }
  @keyframes bgFlow {0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
  h1 {font-family:'Sacramento',cursive;font-size:64px;color:#fff;text-shadow:0 6px 20px rgba(0,0,0,0.25);margin-top:20px;text-align:center;}
  .stats {color:#fff;font-size:20px;margin:10px;}
  .game-area {position:relative;width:100%;height:70vh;overflow:hidden;}
  .emoji {
    position:absolute;
    font-size:32px;
    cursor:pointer;
    user-select:none;
    transition: transform 0.2s;
  }
  .emoji:active {transform: scale(1.3);}
  .overlay {
    position:absolute;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.6);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    color:#fff;
    font-size:28px;
    text-align:center;
    z-index:1000;
    display:none;
  }
  .overlay button {
    margin:10px;
    padding:12px 22px;
    border-radius:16px;
    font-weight:600;
    border:none;
    cursor:pointer;
    font-size:18px;
    color:#fff;
    background:linear-gradient(135deg,#ff758c,#ff7eb3,#8fd3f4);
    box-shadow:0 8px 20px rgba(0,0,0,0.3);
    transition:0.25s ease;
  }
  .overlay button:hover {transform:scale(1.05);}
</style>
</head>
<body>

<h1>Catch the Emoji üíñ</h1>
<div class="stats" id="stats">Score: 0 | Time: 30s</div>
<div class="game-area" id="gameArea"></div>

<div class="overlay" id="overlay">
  <div id="finalScore"></div>
  <div>
    <button id="backBtn">Back</button>
    <button id="playAgainBtn">Play Again</button>
    <button id="nextBtn">Next</button>
  </div>
</div>

<script>
const gameArea = document.getElementById('gameArea');
const stats = document.getElementById('stats');
const overlay = document.getElementById('overlay');
const finalScore = document.getElementById('finalScore');
const backBtn = document.getElementById('backBtn');
const playAgainBtn = document.getElementById('playAgainBtn');
const nextBtn = document.getElementById('nextBtn');

let score = 0;
let time = 30; // ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
let timerInterval;
let emojiTimeouts = [];
let isGameOver = false;

const emojis = [
  {symbol: "üíñ", points: 5},
  {symbol: "üåà", points: 3},
  {symbol: "üå∏", points: 2},
  {symbol: "üíö", points: 1},
  {symbol: "ü•∞", points: 4},
  {symbol: "üíå", points: 6},
];

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
function startGame(){
  score = 0;
  time = 30;
  isGameOver = false;
  overlay.style.display = "none";
  updateStats();
  spawnEmoji();

  timerInterval = setInterval(()=>{
    time--;
    updateStats();
    if(time <= 0){
      endGame();
    }
  },1000);
}

// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô + ‡πÄ‡∏ß‡∏•‡∏≤
function updateStats(){
  stats.textContent = `Score: ${score} | Time: ${time}s`;
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á Emoji ‡∏•‡∏≠‡∏¢
function spawnEmoji(){
  if(time <= 0) return;
  const choice = emojis[Math.floor(Math.random()*emojis.length)];
  const emoji = document.createElement('div');
  emoji.classList.add('emoji');
  emoji.textContent = choice.symbol;
  emoji.dataset.points = choice.points;
  const size = 30 + Math.random()*30;
  emoji.style.fontSize = size + "px";
  emoji.style.left = Math.random()*(window.innerWidth-50) + "px";
  emoji.style.top = "-50px";
  gameArea.appendChild(emoji);

  let pos = -50;
  const speed = 1 + Math.random()*2;
  const fall = setInterval(()=>{
    pos += speed;
    emoji.style.top = pos + "px";
    if(pos > gameArea.offsetHeight){
      clearInterval(fall);
      emoji.remove();
    }
  },10);

  emoji.addEventListener('click', ()=>{
    score += parseInt(emoji.dataset.points);
    emoji.remove();
    updateStats();
  });

  const t = setTimeout(spawnEmoji, 500 + Math.random()*500);
  emojiTimeouts.push(t);
}

// ‡∏à‡∏ö‡πÄ‡∏Å‡∏°
function endGame(){
  if(isGameOver) return;
  isGameOver = true;

  clearInterval(timerInterval);
  emojiTimeouts.forEach(t=>clearTimeout(t));
  emojiTimeouts = [];

  finalScore.textContent = `üéâ Time's up! Your Score: ${score} | ‡∏û‡∏µ‡πà‡∏£‡∏±‡∏Å‡∏´‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î üíñ`;
  overlay.style.display = "flex";

  // ‡∏•‡πâ‡∏≤‡∏á Emoji ‡∏Ñ‡∏á‡∏Ñ‡πâ‡∏≤‡∏á
  document.querySelectorAll('.emoji').forEach(e=>e.remove());
}

// ‡∏õ‡∏∏‡πà‡∏°
backBtn.addEventListener('click', ()=>{window.location.href="mem-game.html";});
playAgainBtn.addEventListener('click', ()=>{startGame();});
nextBtn.addEventListener('click', ()=>{window.location.href="nextPage.html";});

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
startGame();
</script>

</body>
</html>
